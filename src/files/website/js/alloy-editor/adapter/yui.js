CKEDITOR.disableAutoInline=!0,YUI.add("alloy-editor",function(t){"use strict";var e,o=t.Lang,i=27,n=121,a=9;e=t.Base.create("alloyEditor",t.Base,[],{initializer:function(e){var o,i,n;n=this.get("srcNode"),o=CKEDITOR.inline(n.getDOMNode()),o.config.allowedContent=this.get("allowedContent"),o.config.toolbars=this.get("toolbars"),o.config.removePlugins=this.get("removePlugins"),o.config.extraPlugins=this.get("extraPlugins"),o.config.placeholderClass=this.get("placeholderClass"),t.mix(o.config,e),this._editor=o,i=this.get("eventsDelay"),this._eventHandles=[t.one(t.config.doc).on(["click","keydown"],CKEDITOR.tools.debounce(this._onDocInteract,i,this)),n.on("keydown",CKEDITOR.tools.debounce(this._onEditorKey,i,this))],o.on("toolbarKey",this._onToolbarKey,this),o.on("toolbarActive",this._onToolbarActive,this)},destructor:function(){var e;e=CKEDITOR.instances[this.get("srcNode").get("id")],e&&(t.Object.each(e.config.toolbars,function(t){t.destroy()}),e.destroy()),new t.EventHandle(this._eventHandles).detach()},_focusNextToolbar:function(){var e,o,i,n;e=this._activeToolbar,n=this._editor.config.toolbars,n=t.Object.keys(n).map(function(t){return n[t]}),o=t.Array.indexOf(n,e),i=n.splice(o),n=i.concat(n),t.Array.some(n,function(t){return t!==e&&t.focus()?(this._activeToolbar=t,!0):void 0},this)},_focusVisibleToolbar:function(){t.Object.some(this._editor.config.toolbars,function(t){return t!=this._activeToolbar&&t.focus()?(this._activeToolbar=t,t.get("visible")):void 0},this)},_getNativeEditor:function(){return this._editor},_hideToolbars:function(){t.Object.each(this._editor.config.toolbars,function(t){t.hide()})},_onDocInteract:function(e){var o,i,n;n=this.get("srcNode"),i=n===e.target||n.contains(e.target),o=CKEDITOR.instances[n.get("id")],i=i||t.some(o.config.toolbars,function(t){return t.ownsNode(e.target)}),i||this._editor.fire("toolbarsHide")},_onEditorKey:function(t){t.altKey&&t.keyCode===n?this._focusVisibleToolbar():t.keyCode===i&&this._hideToolbars()},_onToolbarActive:function(t){this._activeToolbar=t.data},_onToolbarKey:function(t){t.data.keyCode===a?(t.data.preventDefault(),this._focusNextToolbar()):t.data.keyCode===i&&(this._activeToolbar.blur(),this._activeToolbar=null,this._hideToolbars())},_validateAllowedContent:function(t){return o.isString(t)||o.isObject(t)||o.isBoolean(t)},_validateToolbars:function(t){return""===t||o.isObject(t)||o.isNull(t)}},{ATTRS:{allowedContent:{validator:"_validateAllowedContent",value:!0,writeOnce:!0},eventsDelay:{validator:o.isNumber,value:100},extraPlugins:{validator:o.isString,value:"uicore,selectionregion,dropimages,placeholder,linktooltip,uiloader",writeOnce:!0},nativeEditor:{getter:"_getNativeEditor",readOnly:!0},placeholderClass:{validator:o.isString,value:"alloy-editor-placeholder",writeOnce:!0},removePlugins:{validator:o.isString,value:"contextmenu,toolbar,elementspath,resize,liststyle,tabletools,link",writeOnce:!0},srcNode:{setter:t.one,writeOnce:!0},toolbars:{validator:"_validateToolbars",value:{add:["image"],image:["left","right"],styles:["strong","em","u","h1","h2","a","twitter"]}}}}),t.AlloyEditor=e},"",{requires:["base-build","node-base"]});